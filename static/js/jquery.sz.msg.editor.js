(function($, window, undefined){	var defaults = { 		url:'http://sz.me/api/tags',		interval: 500	}; 	// актуальные настройки, глобальные	var options;	var szChangeMessageTime = {};		$.fn.sz_msg_editor = function(params) {		// при многократном вызове функции настройки будут сохранятся, и замещаться при необходимости		options = $.extend({}, defaults, options, params); 				return this.each(function(){ // jQuery chainability			szChangeMessageTime[$(this).attr("id")] = 0;	   		$(this).bind('textchange', function (event, previousText) 			{;				szChangeMessageTime[$(this).attr("id")] = +new Date();			});			setInterval( 				function () {					$.each(szChangeMessageTime, function(k, v) {						if (v != 0 							&& +new Date() - v > 100							)							if ($('#' + k).val().length > 3)							{								$.post(									options.url, 									{ 										message: $('#' + k).val(), 										csrfmiddlewaretoken: $("input[name=csrfmiddlewaretoken]").val() 									},									function(data) {										$('#' + k + 'Tags').val(data.tags);									});								szChangeMessageTime[k] = 0;							}							else								$('#' + k + 'Tags').val('')					});				}, 				options.interval);		});	}})(jQuery, window);