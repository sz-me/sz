
function geoClick(){
    var geoValue = $(this).text();
    $(this).attr('class',function(index,oldval){
        if (oldval=='boxSingle'){
            var i=$(this).index()-1
            $.each($("#geo>div"),function(index,val){
                if (index != i){$(val).attr('class','boxSingle');}                    
                });
            return 'boxSelect';}
        });
 
    $("#georoot").text(geoValue).hide();
    $("#geo").hide();
    
    $("#typeroot").show();
    $("#type").show()
};

function priceClick(){
   var priceValue = $(this).text();
        $(this).attr('class',function(index,oldval){
            if (oldval=='boxSingle'){
                var i=$(this).index()
                $.each($("#priceString>div"),function(index,val){
                    if (index != i){$(val).attr('class','boxSingle');}                    
                    });
                return 'boxSelect';}
            });
        $("#typeroot").text(priceValue+'р').hide();
        $("#type").hide();        
        $("#tagroot").show()
        $("#tag").show()
};



function checkArea(tagCase,area){
    
    if ($(area).children().text()==''){
    
    $.each(tagCase,function(index,val){
            var tagDiv=jQuery('<div>',{
                text:' '+val+' ',
                class:'boxMulty',
                click:function(){
                    $(this).attr('class',function(index,oldval){
                        if (oldval=='boxMulty') {$("#catArea>input").css('color','black').val('Дальше');return 'boxSelect'}
                        if (oldval=='boxSelect') {return 'boxMulty'}
                    });
                    }
            }).appendTo(area)
        });}
};

$(function(){
    var geoMas = [['Октябрьская 200',' Магазин 1'],['Калинина 200',' Магазин 2']];
        fBodyTag = ['Платье','Сарафан','Футболка','Топ','Толстовка','Кардиган','Пуловер','Блузка','Туника','Костюм','Водолазка','Комбинизон','Свитер','Свитшот','Логнслив','Худи'];
        fHeadTag = ['Шапки ','Шляпы ','Ушанки ','Банданы ','Косынки ','Шлемы ','Кепки ','Бейсболки ','Тэниски '];
    
    $("#addbut").click(function(){
        $(".innerform").hide();
        $(".root").hide();

        $("#georoot").show();
        $("#geo").show();
        if ($("#geo").find("div").text()==''){
        $.each(geoMas,function(index,val){
            var geoTag = jQuery('<div>',{
                class:'boxSingle',
                id:'geoTag',
                click:geoClick
            }).appendTo("#geo");
            $.each(val,function(index,val){
                var $geoLabel = jQuery('<p>',{text:val}).appendTo($(geoTag))
            });
        });}
    });
    
    
//Шаг 1 - Выбор геолокации    

    $("#geosearch").focus(function(){$(this).val("");});
    $("#geosearch").blur(function(){$(this).val("Начните вводить адрес или название");});
    

//Шаг 2 - Выбор типа, цены/скидки

    $("#typetabs").tabs();
    
        
    $(".myValue").focus(function(){$(this).val("");});
    $(".myValue").blur(function(){$(this).val("Свое значение");});
    //Выбор скидки    
    $("#tabsSaleoff>div").click(function(){
        var discValue = $(this).text();
        $(this).attr('class',function(index,oldval){
            if (oldval=='boxSingle'){
                var i=$(this).index()
                $.each($("#tabsSaleoff>div"),function(index,val){
                    if (index != i){$(val).attr('class','boxSingle');}                    
                    });
                return 'boxSelect';}
            });
        $("#typeroot").text(discValue+'%').hide()
        $("#type").hide();
        $("#tagroot").show()
        $("#tag").show()
        });
    //Выбор цены        
    
    $("#tabPrice").click(function(){
        var maxPrice = $("#priceString>div:last").text()
        if(maxPrice==''){
            var newPrice=[100,200,300,400,500,600,700,800,900,1000]
            $.each(newPrice,function(index,val){
                var boxPrice = jQuery('<div>',{
                    class:'boxSingle',
                    css:{width:'30px',height:'20px'},
                    click:priceClick,
                    text:val
                }).appendTo("#priceString")
                });}
    });
     
    
    $("#more").click(function(){
        $("#more").animate({opacity:'0.4'});
        $.each($("#priceString>div"),function(index,val){
            var old=$(val).text();
                newVal=Number(old)+1000;
            $(val).text(newVal);
        });
        $("#more").animate({opacity:'1'}); 
    });
    
    //Кнопка прокрутки цены назад       
    $("#less").click(function(){
        var min = Number($("#priceString>div:first").text())
        if (min>100){
        $("#less").animate({opacity:'0.4'});
        $.each($("#priceString>div"),function(index,val){
        var old=$(val).text();
            newVal=Number(old)-1000;
        $(val).text(newVal);
        });
        $("#less").animate({opacity:'1'});}
        });
        
/*//Шаг 3 - выбор тэгов
    $("#tagsearch").focus(function(){$(this).val("");});
    $("#tagsearch").blur(function(){$(this).val("Начните вводить название");});   
    
    var WinWidth = $(window).width();        i = (WinWidth-100)/2;
    $.each($("#catArea>div"),function(index,val){$(val).css({'margin-left':i});});
    
        
    $("#female").click(function(){
        $.each($("#genderArea>div"),function(index,val){$(val).hide()});
        $("#femaleClothes").show()
    });
    
    $("#male").click(function(){
        $.each($("#genderArea>div"),function(index,val){$(val).hide()});
        $("#maleClothes").show()
    });
    
    $("#kind").click(function(){
        $.each($("#genderArea>div"),function(index,val){$(val).hide()});
        $("#kindClothes").show()
    });
    
    $("#unisex").click(function(){
        $.each($("#genderArea>div"),function(index,val){$(val).hide()});
        $("#unisexClothes").show()
    });
    
    $("#bodyCat").click(function(){
        var w=$(this).css('width');
            bodyIndex=$(this).index();
            area = $("#bodyTag");
        if (w=='66px'){
            $("#bodyCat").animate({marginLeft:i,width:'100px',height:'50px',borderColor:'black',borderWidth:'1px'});
            
            $("#headCat").animate({marginLeft:i,width:'100px',height:'38px',borderColor:'black',borderWidth:'1px'});
            $("#legsCat").animate({marginLeft:i,width:'100px',height:'135px',borderColor:'black',borderWidth:'1px'});
            $("#footCat").animate({marginLeft:i,width:'100px',height:'30px',borderColor:'black',borderWidth:'1px'});
            $("#bodyTag").hide();
            return false;}
        if(w=='50px'){
            $("#bodyCat").animate({marginLeft:'0px',width:'66px',height:'33px',borderColor:'green',borderWidth:'2px'},checkArea(fBodyTag,area));
        
            $("#headCat").animate({marginLeft:'16px',width:'50px',height:'19px',borderColor:'black',borderWidth:'1px'});
            $("#legsCat").animate({marginLeft:'16px',width:'50px',height:'67px',borderColor:'black',borderWidth:'1px'});
            $("#footCat").animate({marginLeft:'16px',width:'50px',height:'15px',borderColor:'black',borderWidth:'1px'});
            $.each($("#tagArea>div"),function(index,val){$(val).hide();});
            $("#bodyTag").show();
            return false;}
        if(w=='100px'){
            $("#bodyCat").animate({marginLeft:'0px',width:'66px',height:'33px',borderColor:'green',borderWidth:'2px'},checkArea(fBodyTag,area));
    
            $("#headCat").animate({marginLeft:'16px',width:'50px',height:'19px',borderColor:'black',borderWidth:'1px'});
            $("#legsCat").animate({marginLeft:'16px',width:'50px',height:'67px',borderColor:'black',borderWidth:'1px'});
            $("#footCat").animate({marginLeft:'16px',width:'50px',height:'15px',borderColor:'black',borderWidth:'1px'});
            $("#bodyTag").show();
            return false; }
        });
    
    
    
    $("#headCat").click(function(){
        var w=$(this).css('width');
            bodyIndex=$(this).index();
            area = $("#headTag");
        if (w=='66px'){
            $("#headCat").animate({marginLeft:i,width:'100px',height:'38px',borderColor:'black',borderWidth:'1px'});
            
            $("#bodyCat").animate({marginLeft:i,width:'100px',height:'50px',borderColor:'black',borderWidth:'1px'});
            $("#legsCat").animate({marginLeft:i,width:'100px',height:'135px',borderColor:'black',borderWidth:'1px'});
            $("#footCat").animate({marginLeft:i,width:'100px',height:'30px',borderColor:'black',borderWidth:'1px'});
            $(area).hide();
            return false;}
        if(w=='50px'){
            $("#headCat").animate({marginLeft:'0px',width:'66px',height:'25px',borderColor:'green',borderWidth:'2px'},checkArea(fHeadTag,area));
            
            $("#bodyCat").animate({marginLeft:'16px',width:'50px',height:'25px',borderColor:'black',borderWidth:'1px'});
            $("#legsCat").animate({marginLeft:'16px',width:'50px',height:'67px',borderColor:'black',borderWidth:'1px'});
            $("#footCat").animate({marginLeft:'16px',width:'50px',height:'15px',borderColor:'black',borderWidth:'1px'});
            $.each($("#tagArea>div"),function(index,val){$(val).hide();});
            $(area).show();
            return false;}
        if(w=='100px'){
            $("#headCat").animate({marginLeft:'0px',width:'66px',height:'25px',borderColor:'green',borderWidth:'2px'},checkArea(fHeadTag,area));
            
            $("#bodyCat").animate({marginLeft:'16px',width:'50px',height:'25px',borderColor:'black',borderWidth:'1px'});
            $("#legsCat").animate({marginLeft:'16px',width:'50px',height:'67px',borderColor:'black',borderWidth:'1px'});
            $("#footCat").animate({marginLeft:'16px',width:'50px',height:'15px',borderColor:'black',borderWidth:'1px'});
            $(area).show();
            return false; }
        });

        
 
       
    
    $("#Complete").click(function(){
        $("#tagroot").text(function(){return $("#tagArea").find(".boxSelect").text()}).hide();       
        $("#tag").hide();
       
        $(".root").show();
        $("#CompleteAll").show();
    });
    
    $("#georoot").click(function(){
        $(".innerform").hide();$(".root").hide();
            $(this).show();
            $("#geo").show()});
    $("#typeroot").click(function(){$(".innerform").hide();$(".root").hide();$(this).show();$("#type").show()});
    $("#tagroot").click(function(){$(".innerform").hide();$(".root").hide();$(this).show();$("#tag").show()});
    
    $("#CompleteAll").click(function(){alert("Ты прелесть")});*/
});
    

